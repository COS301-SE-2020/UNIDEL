@{
    ViewData["Title"] = "Manage Vehicles";
}
<div class="container.lg shadow p-3 mb-5 bg-white rounded">
    <div class="text-center">
        <h1 class="display-4">Manage Vehicles</h1>
        <p></p>
    </div>

    <div class="form-row">
        <div class="col shadow p-2">
            @using (Html.BeginForm("CaptureService", "FleetManagement", FormMethod.Post))
            {
                <h2>Service Vehicle</h2>
                <label for="selectV" class="doublecenter">Vehicle Id:</label>
                <input type="number" id="selectV" name="selectV" placeholder="1" class="doublecenter">
                <label for="nextService" class="input-group-text" id="inputGroup-sizing-sm">Next Service Date</label>
                <input type="date" class="form-control" aria-label="Next Service Date" id="nextService" aria-describedby="inputGroup-sizing-sm" name="nextService" placeholder="yyyy/mm/dd">
                <br />
                <input type="submit" value="Log Service Date" class="btn btn-block blue greenblue">
            }
        </div>
        <div class="col-"></div>
        <div class="col shadow p-2">
            @using (Html.BeginForm("RenewLicenseDisk", "FleetManagement", FormMethod.Post))
            {
                <h2>Renew License Disk</h2>
                <label for="selectV" class="doublecenter">Vehicle Id:</label>
                <input type="number" id="selectV" name="selectV" placeholder="1" class="doublecenter">
                <label for="newExp" class="input-group-text" id="inputGroup-sizing-sm">New Expiry Date</label>
                <input type="date" class="form-control" aria-label="New Expiry Date" aria-describedby="inputGroup-sizing-sm" id="newExp" name="newExp" placeholder="yyyy/mm/dd">
                <br />
                <input type="submit" value="Renew License Disk" class="btn btn-block blue greenblue">
            }
        </div>
    </div>

    <br />

    <table cellpadding="13" class="table table-hover shadow p-2 rounded active table-striped roundedtable">
        <thead class="whitefont blue">
            <tr>
                <th class="my-auto align-middle text-light">ID</th>
                <th class="my-auto align-middle text-light">Make</th>
                <th class="my-auto align-middle text-light">Model</th>
                <th class="my-auto align-middle text-light">VIN</th>
                <th class="my-auto align-middle text-light">License Plate</th>
                <th class="my-auto align-middle text-light">License Disk Expiry</th>
                <th class="my-auto align-middle text-light">Mileage</th>
                <th class="my-auto align-middle text-light">Next Mileage Service</th>
                <th class="my-auto align-middle text-light">Last Service</th>
                <th class="my-auto align-middle text-light">Next Date Service</th>
                <th colspan="2" class="my-auto align-middle text-light"></th>
                <!--th>Edit</th>
                <th>Delete</th-->
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>@item.VehicleID</td>
                    <td>@item.VehicleMake</td>
                    <td>@item.VehicleModel</td>
                    <td>@item.VehicleVIN</td>
                    <td style="white-space:nowrap">@item.VehicleLicensePlate</td>
                    <td malength="10">@item.VehicleLicenseDiskExpiry</td>
                    <td>@item.VehicleMileage</td>
                    <td>@item.VehicleNextMileageService</td>
                    <td>@item.VehicleLastService</td>
                    <td>@item.VehicleNextDateService</td>
                    <td class="my-auto align-middle" cellpadding="8">
                        @using (Html.BeginForm("Edit", "FleetManagement", FormMethod.Post))
                        {
                            <input type="hidden" id="selectV" name="selectV" value="@item.VehicleID">
                            <button class="btn btn-light" type="submit"><img src="~/images/pencil-alt-solid.svg" width="15" alt=""></button>
                        }
                    </td>
                    <td class="my-auto align-middle" cellpadding="8">
                        @using (Html.BeginForm("Delete", "FleetManagement", FormMethod.Post))
                        {
                            <input type="hidden" id="selectV" name="selectV" value="@item.VehicleID">
                            <button class="btn btn-light" type="submit" onclick="return confirm('Are you sure you want to delete Vehicle : @item.VehicleID @item.VehicleMake @item.VehicleModel')"><img src="~/images/trash-solid.svg" width="15" alt=""></button>
                        }
                    </td>
                </tr>
            }
        </tbody>
    </table>

</div>
<script src="/lib/jquery/dist/jquery.min.js"></script>
<script>$(document).ready(function () {
        var today = new Date();
        var dd = today.getDate();
        var mm = today.getMonth() + 1;
        var yyyy = today.getFullYear();
        if (dd < 10) {
            dd = '0' + dd
        }
        if (mm < 10) {
            mm = '0' + mm
        }

        today = yyyy + '-' + mm + '-' + dd;
        document.getElementById("nextService").setAttribute("min", today);
        document.getElementById("newExp").setAttribute("min", today);


    });</script>
